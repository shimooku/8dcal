# 仕様

## 式表記の仕様

入力された式は以下の解釈ルールで処理する

演算子：*/+- の4つで'='は不正文字とみなす
数値  ：-99999999～99999999の整数値
括弧  ：() ネストを許可
その他：

- 括弧式の隣に数値や括弧式がある場合は'*'を暗黙に挿入する
  -  "10(3+1)"は"10*(3+1)"と解釈する
  -  "(3+1)(2+3)"は"(3+1)*(2+3)"と解釈する
- 符号付き数値を解釈する
  - --1 は -(-1)と解釈する
  - ---1 は -(-(-1))と解釈する
- 割り算の小数部は切り捨てる



## エラーハンドリング

エラー処理の対象とエラーメッセージ

- 対応する括弧が無い：Unmatched parenthesis
- 演算子があるにもかかわらず左項あるいは右項が無い：Invalid formula
- 数値の間に演算子が無い：Invalid formula
- 数値、演算子、括弧以外の文字がある：Invalid parameter
- 入力値が8桁を超える整数のとき：Overflow, Underflow
- 計算途中で数値が整数8桁を超えたとき：Overflow, Underflow



## 動作モード

3つの動作モードを提供

・コマンドモード

・インタラクティブモード

・リダイレクトモード



### コマンドモード

引数に数式を渡して実行すると標準出力に「数式=回答」を表示

例：1 + 2 * (3 + 4) - 5 を計算する

```
> picol_no3 1 + 2 * (3 + 4) - 5
1+2*(3+4)-5=10
>
```

### インタラクティブモード

引数を指定せずに起動すると、'PICO>'を表示して数式入力を促し、数式を入力して改行すると、回答を表示して、次の数式入力を促す。これを"quit"かCtrl-Cを入力するまで繰り返す。

例：「1 + 2 * (3 + 4) - 5」を計算したあと、「6 + 7 * 8」を計算して、終了する

```
> picol_no3
PICO> 1 + 2 * (3 + 4) - 5
10
PICO> 6 + 7 * 8
62
PICO> quit
>
```

### リダイレクトモード

式を記載したテキストファイルをリダイレクトで流し込み、標準出力に順次「数式=回答」を表示

例：2つの式「1 + 2 * (3 + 4) - 5」「6 + 7 * 8」を記載したテキストファイルを指定して回答を表示

```
> picol_no3 < formula.txt
1 + 2 * (3 + 4) - 5 = 10
6 + 7 * 8 = 62
> 
```



以上